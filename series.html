<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading Paths | Post-Labor Economics</title>
  <meta name="description" content="Curated learning paths through post-labor economics topics.">
  <link rel="icon" type="image/svg+xml" href="/ple-logo.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,500;9..144,600;9..144,700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/src/styles/app.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .paths-page{max-width:900px;margin:0 auto;padding:2rem 1.5rem}
    .path-card{background:white;border:1px solid var(--border-color,#e5e2dd);border-radius:14px;padding:1.5rem;margin-bottom:1.5rem;transition:box-shadow 0.2s}
    .path-card:hover{box-shadow:0 4px 20px rgba(0,0,0,0.06)}
    .path-header{display:flex;align-items:flex-start;gap:1rem;margin-bottom:1rem}
    .path-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}
    .path-title{font-family:'Fraunces',serif;font-size:1.25rem;font-weight:600}
    .path-desc{color:var(--text-secondary);font-size:0.9rem;margin-bottom:0.75rem;line-height:1.6}
    .path-meta{display:flex;gap:1rem;font-size:0.8rem;color:var(--text-muted);margin-bottom:1rem}
    .path-steps{counter-reset:step;list-style:none;padding:0;margin:0}
    .path-step{display:flex;gap:0.75rem;padding:0.6rem 0;border-top:1px solid var(--border-color,#f0ede8)}
    .path-step:first-child{border-top:none}
    .step-num{counter-increment:step;width:24px;height:24px;border-radius:50%;background:var(--color-horizon,#1B4D3E);color:white;display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:700;flex-shrink:0;margin-top:2px}
    .step-num::after{content:counter(step)}
    .step-content{flex:1;min-width:0}
    .step-title{font-weight:500;font-size:0.9rem}
    .step-title a{color:inherit;text-decoration:none;border-bottom:1px dashed transparent}
    .step-title a:hover{border-bottom-color:currentColor}
    .step-excerpt{font-size:0.8rem;color:var(--text-muted);margin-top:0.15rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .step-meta{font-size:0.7rem;color:var(--text-muted);margin-top:0.2rem}
    .path-cta{display:inline-flex;align-items:center;gap:0.35rem;padding:0.4rem 1rem;border:1px solid var(--color-horizon,#1B4D3E);border-radius:8px;color:var(--color-horizon,#1B4D3E);text-decoration:none;font-size:0.85rem;font-weight:500;margin-top:0.5rem;transition:all 0.15s}
    .path-cta:hover{background:var(--color-horizon,#1B4D3E);color:white}
    .empty-paths{text-align:center;padding:4rem 2rem;color:var(--text-muted)}
  </style>
</head>
<body>
  <a href="#main-content" class="skip-nav">Skip to main content</a>
  <header class="nav-header">
    <nav class="nav-container">
      <a href="index.html" class="nav-logo"><span class="logo-symbol">L/0</span> <span class="logo-text">Post-Labor Economics</span></a>
      <button class="nav-toggle" aria-label="Toggle navigation" onclick="document.querySelector('.nav-menu').classList.toggle('open')" aria-label="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button>
      <div class="nav-menu">
        <a href="content.html" class="nav-link">Content</a>
        <a href="projects.html" class="nav-link">Projects</a>
        <a href="proposals.html" class="nav-link">Proposals</a>
        <a href="discussions.html" class="nav-link">Discussions</a>
        <a href="tags.html" class="nav-link">Tags</a>
        <a href="search.html" class="nav-link" style="padding:0.4rem;display:flex;" title="Search"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></a>
        <a href="login.html" class="nav-link" data-auth="logged-out">Sign In</a>
        <a href="dashboard.html" class="nav-link" data-auth="logged-in" style="display:none">Dashboard</a>
      </div>
    </nav>
  </header>
  <main id="main-content" class="paths-page">
    <h1 style="font-family:'Fraunces',serif;font-size:2rem;margin-bottom:0.25rem">Reading Paths</h1>
    <p style="color:var(--text-muted);margin-bottom:2rem">Curated sequences for progressive learning through post-labor economics</p>
    <div id="paths-container">
      <div class="skeleton skeleton-card"></div>
      <div class="skeleton skeleton-card"></div>
    </div>
  </main>
  <script type="module">
    import { initPage } from './src/scripts/api.js';
    await initPage();

    const esc=s=>{const d=document.createElement('div');d.textContent=s;return d.innerHTML;};

    // Reading paths are curated groupings of published content by topic
    const PATHS = [
      { id:'foundations', title:'Foundations of Post-Labor Economics', icon:'üìö', color:'#E8F5E9',
        desc:'Start here. Understanding why work is changing and what it means for human prosperity.',
        tags:['post-labor economics','economics','automation','labor'] },
      { id:'policy', title:'Policy Toolkit', icon:'üèõÔ∏è', color:'#E3F2FD',
        desc:'Concrete policy proposals from UBI to robot taxes ‚Äî what works, what doesn\'t, and why.',
        tags:['policy','UBI','governance'] },
      { id:'technology', title:'Technology & Automation', icon:'‚öôÔ∏è', color:'#FFF3E0',
        desc:'How AI, robotics, and cognitive automation are reshaping the relationship between humans and work.',
        tags:['technology','automation','AI'] },
      { id:'governance', title:'Governance & Institutions', icon:'ü§ù', color:'#F3E5F5',
        desc:'Building the institutions, frameworks, and democratic structures for a post-labor world.',
        tags:['governance','framework','GATO'] },
      { id:'philosophy', title:'Philosophy of Liberation', icon:'üåÖ', color:'#FBE9E7',
        desc:'The deeper questions: What is work for? What does freedom mean when labor is optional?',
        tags:['philosophy','liberation','core'] }
    ];

    async function loadPaths() {
      try {
        const r=await fetch('/api/content?status=published&limit=200');
        const d=await r.json();
        const allContent=(d.content||[]);

        const container=document.getElementById('paths-container');
        if(!allContent.length){container.innerHTML='<div class="empty-paths"><h3>Content coming soon</h3><p>Reading paths will appear as published content grows.</p></div>';return;}

        container.innerHTML=PATHS.map(path=>{
          // Match content by tags
          const matches=allContent.filter(c=>{
            const cTags=(c.tags||[]).map(t=>typeof t==='string'?t.toLowerCase():t.name?.toLowerCase());
            return path.tags.some(pt=>cTags.includes(pt.toLowerCase()));
          }).sort((a,b)=>new Date(a.publishedAt||a.createdAt)-new Date(b.publishedAt||b.createdAt));

          if(!matches.length) return '';

          const totalWords=matches.reduce((sum,c)=>{
            const body=c.body||c.excerpt||'';
            return sum+body.split(/\s+/).length;
          },0);
          const readMin=Math.ceil(totalWords/200);

          return`<div class="path-card">
            <div class="path-header">
              <div class="path-icon" style="background:${path.color}">${path.icon}</div>
              <div>
                <div class="path-title">${esc(path.title)}</div>
                <div class="path-desc">${esc(path.desc)}</div>
                <div class="path-meta">
                  <span>${matches.length} article${matches.length!==1?'s':''}</span>
                  <span>~${readMin} min total</span>
                </div>
              </div>
            </div>
            <ol class="path-steps">
              ${matches.map(c=>{
                const tagName=t=>typeof t==='string'?t:t.name;
                const excerpt=c.excerpt||(c.body||'').replace(/[#*`>\[\]]/g,'').substring(0,120);
                return`<li class="path-step">
                  <div class="step-num"></div>
                  <div class="step-content">
                    <div class="step-title"><a href="content-view.html?id=${c.slug||c.id}">${esc(c.title)}</a></div>
                    ${excerpt?`<div class="step-excerpt">${esc(excerpt)}</div>`:''}
                    <div class="step-meta">${c.author?.name||'Anonymous'} ¬∑ ${c.contentType||'article'}</div>
                  </div>
                </li>`}).join('')}
            </ol>
            ${matches.length?`<a href="content-view.html?id=${matches[0].slug||matches[0].id}" class="path-cta">Start reading ‚Üí</a>`:''}
          </div>`}).filter(Boolean).join('');

        if(!container.innerHTML.trim()) container.innerHTML='<div class="empty-paths"><h3>Paths building</h3><p>Reading paths will populate as more tagged content is published.</p></div>';
      } catch(e) {
        document.getElementById('paths-container').innerHTML='<div class="empty-paths"><p>Unable to load reading paths</p></div>';
      }
    }
    loadPaths();
  </script>
<footer style="margin-top:4rem;padding:1.5rem 0;border-top:1px solid var(--border-color,#e5e2dd);text-align:center;font-size:0.8rem;color:var(--text-muted,#888);"><div style="max-width:1200px;margin:0 auto;padding:0 1.5rem;"><a href="index.html" style="text-decoration:none;color:inherit;font-weight:600;">L/0</a> Post-Labor Economics ¬∑ <a href="about.html" style="color:inherit;">About</a> ¬∑ <a href="community.html" style="color:inherit;">Community</a> ¬∑ <a href="/api/rss" style="color:inherit;">RSS</a> ¬∑ <a href="https://github.com/sillinous/ple-platform" target="_blank" style="color:inherit;">GitHub</a></div></footer>
</body>
</html>
